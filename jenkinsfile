pipeline {
    agent any
    environment {
            PATH = "/usr/local/bin:$PATH"   // ðŸ‘ˆ add this line so Jenkins sees docker
        }
        tools {
            nodejs("24.6.0")
        }
        stages {
            stage("checkout") {
            steps {
                checkout scm
                   }
            }

            stage("Docker Check") {
              steps {
                sh 'which docker'
                sh 'docker --version'
              }
            }

          stage("test") {
                steps {
                   sh 'npm version'
                   sh 'npm install'
                }
          }


          stage("build") {
                steps {
                    sh 'npm run build'
                }
                }

          stage("Build Image") {
                steps {
                    sh 'docker build -t my-node-app:1.0 .'
                }
          }
    }
}
